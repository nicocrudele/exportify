{"version":3,"sources":["icons.jsx","helpers.jsx","components/Login.jsx","components/PlaylistExporter.jsx","components/PlaylistRow.jsx","components/Paginator.jsx","components/PlaylistsExporter.jsx","components/PlaylistTable.jsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["library","add","fab","faCheckCircle","faTimesCircle","faFileArchive","faHeart","faBolt","faMusic","authorize","client_id","getQueryParam","window","location","href","encodeURIComponent","protocol","host","pathname","join","name","replace","results","RegExp","exec","search","decodeURIComponent","apiCall","url","access_token","$","ajax","headers","fail","jqXHR","textStatus","status","split","alert","responseText","Login","Button","id","type","bsSize","onClick","icon","size","React","Component","PlaylistExporter","export","playlist","this","csvData","then","data","blob","Blob","saveAs","fileName","requests","limit","tracks","offset","total","push","when","apply","responses","arguments","Array","prototype","slice","call","map","a","response","items","item","track","uri","artists","artist","String","album","disc_number","track_number","duration_ms","added_by","added_at","n","unshift","csvContent","forEach","row","index","dataString","cell","toLowerCase","PlaylistRow","exportPlaylist","props","condition","style","color","renderIcon","colSpan","renderTickCross","public","collaborative","owner","display_name","className","Paginator","nextClick","e","preventDefault","nextURL","loadPlaylists","prevClick","prevURL","aria-label","aria-hidden","PlaylistsExporter","playlistCount","likedSongsLimit","likedSongsCount","playlistFileNames","userId","playlists","playlistExports","each","i","merge","zip","JSZip","file","generateAsync","content","PlaylistTable","state","firstPage","indexOf","done","args","setState","next","previous","fadeIn","text","length","exportPlaylists","width","data-testid","App","view","key","URLSearchParams","hash","substring","fontSize","marginBottom","target","rel","marginTop","has","get","process","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Bugsnag","start","apiKey","plugins","BugsnagPluginReact","enabledReleaseStages","onError","event","request","ErrorBoundary","getPlugin","createErrorBoundary","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.71f1e960.chunk.js","sourcesContent":["import { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport { faCheckCircle, faTimesCircle, faFileArchive, faHeart } from '@fortawesome/free-regular-svg-icons'\nimport { faBolt, faMusic } from '@fortawesome/free-solid-svg-icons'\n\nlibrary.add(fab, faCheckCircle, faTimesCircle, faFileArchive, faHeart, faBolt, faMusic)\n","import $ from \"jquery\" // TODO: Remove jQuery dependency\n\nexport function authorize() {\n  var client_id = getQueryParam('app_client_id');\n\n  // Use Exportify application client_id if none given\n  if (client_id === '') {\n    client_id = \"9950ac751e34487dbbe027c4fd7f8e99\"\n  }\n\n  window.location.href = \"https://accounts.spotify.com/authorize\" +\n    \"?client_id=\" + client_id +\n    \"&redirect_uri=\" + encodeURIComponent([window.location.protocol, '//', window.location.host, window.location.pathname].join('')) +\n    \"&scope=playlist-read-private%20playlist-read-collaborative%20user-library-read\" +\n    \"&response_type=token\";\n}\n\n// http://stackoverflow.com/a/901144/4167042\nexport function getQueryParam(name) {\n  name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(window.location.search);\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\nexport function apiCall(url, access_token) {\n  return $.ajax({\n    url: url,\n    headers: {\n      'Authorization': 'Bearer ' + access_token\n    }\n  }).fail(function (jqXHR, textStatus) {\n    if (jqXHR.status === 401) {\n      // Return to home page after auth token expiry\n      window.location.href = window.location.href.split('#')[0]\n    } else if (jqXHR.status === 429) {\n      // API Rate-limiting encountered\n      window.location.href = window.location.href.split('#')[0] + '?rate_limit_message=true'\n    } else {\n      // Otherwise report the error so user can raise an issue\n      alert(jqXHR.responseText);\n    }\n  })\n}\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { authorize } from \"helpers\"\n\nclass Login extends React.Component {\n  render() {\n    return (\n      <Button id=\"loginButton\" type=\"submit\" bsSize=\"large\" onClick={authorize}>\n        <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" /> Get Started\n      </Button>\n    )\n  }\n}\n\nexport default Login\n","import $ from \"jquery\" // TODO: Remove jQuery dependency\nimport { saveAs } from \"file-saver\"\n\nimport { apiCall } from \"helpers\"\n\n// Handles exporting a single playlist as a CSV file\nvar PlaylistExporter = {\n  export: function(access_token, playlist) {\n    this.csvData(access_token, playlist).then((data) => {\n      var blob = new Blob([ data ], { type: \"text/csv;charset=utf-8\" });\n      saveAs(blob, this.fileName(playlist), true);\n    })\n  },\n\n  csvData: function(access_token, playlist) {\n    var requests = [];\n    var limit = playlist.tracks.limit || 100;\n\n    for (var offset = 0; offset < playlist.tracks.total; offset = offset + limit) {\n      requests.push(\n        apiCall(`${playlist.tracks.href.split('?')[0]}?offset=${offset}&limit=${limit}`, access_token)\n      )\n    }\n\n    return $.when.apply($, requests).then(function() {\n      var responses = [];\n\n      // Handle either single or multiple responses\n      if (typeof arguments[0] != 'undefined') {\n        if (typeof arguments[0].href == 'undefined') {\n          responses = Array.prototype.slice.call(arguments).map(function(a) { return a[0] });\n        } else {\n          responses = [arguments[0]];\n        }\n      }\n\n      var tracks = responses.map(function(response) {\n        return response.items.map(function(item) {\n          return [\n            item.track.uri,\n            item.track.name,\n            item.track.artists.map(function(artist) { return artist.uri }).join(', '),\n            item.track.artists.map(function(artist) { return String(artist.name).replace(/,/g, \"\\\\,\") }).join(', '),\n            item.track.album.uri,\n            item.track.album.name,\n            item.track.disc_number,\n            item.track.track_number,\n            item.track.duration_ms,\n            item.added_by == null ? '' : item.added_by.uri,\n            item.added_at\n          ];\n        });\n      });\n\n      // Flatten the array of pages\n      tracks = $.map(tracks, function(n) { return n })\n\n      tracks.unshift([\n        \"Track URI\",\n        \"Track Name\",\n        \"Artist URI\",\n        \"Artist Name\",\n        \"Album URI\",\n        \"Album Name\",\n        \"Disc Number\",\n        \"Track Number\",\n        \"Track Duration (ms)\",\n        \"Added By\",\n        \"Added At\"\n      ]);\n\n      let csvContent = '';\n\n      tracks.forEach(function(row, index){\n        let dataString = row.map(function (cell) { return '\"' + String(cell).replace(/\"/g, '\"\"') + '\"'; }).join(\",\");\n        csvContent += dataString + \"\\n\";\n      });\n\n      return csvContent;\n    });\n  },\n\n  fileName: function(playlist) {\n    return playlist.name.replace(/[\\x00-\\x1F\\x7F/\\\\<>:;\"|=,.?*[\\] ]+/g, \"_\").toLowerCase() + \".csv\"; // eslint-disable-line no-control-regex\n  }\n}\n\nexport default PlaylistExporter\n","import React from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nimport PlaylistExporter from \"./PlaylistExporter\"\n\nclass PlaylistRow extends React.Component {\n  exportPlaylist = () => {\n    PlaylistExporter.export(this.props.access_token, this.props.playlist);\n  }\n\n  renderTickCross(condition) {\n    if (condition) {\n      return <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" />\n    } else {\n      return <FontAwesomeIcon icon={['far', 'times-circle']} size=\"sm\" style={{ color: '#ECEBE8' }} />\n    }\n  }\n\n  renderIcon(playlist) {\n    if (playlist.name === 'Liked') {\n      return <FontAwesomeIcon icon={['far', 'heart']} style={{ color: 'red' }} />;\n    } else {\n      return <FontAwesomeIcon icon={['fas', 'music']} />;\n    }\n  }\n\n  render() {\n    let playlist = this.props.playlist\n\n    if(playlist.uri==null) return (\n      <tr key={playlist.name}>\n        <td>{this.renderIcon(playlist)}</td>\n        <td>{playlist.name}</td>\n        <td colSpan=\"2\">This playlist is not supported</td>\n        <td>{this.renderTickCross(playlist.public)}</td>\n        <td>{this.renderTickCross(playlist.collaborative)}</td>\n        <td>&nbsp;</td>\n      </tr>\n    );\n\n    return (\n      <tr key={playlist.uri}>\n        <td>{this.renderIcon(playlist)}</td>\n        <td><a href={playlist.uri}>{playlist.name}</a></td>\n        <td><a href={playlist.owner.uri}>{playlist.owner.display_name}</a></td>\n        <td>{playlist.tracks.total}</td>\n        <td>{this.renderTickCross(playlist.public)}</td>\n        <td>{this.renderTickCross(playlist.collaborative)}</td>\n        <td className=\"text-right\"><button className=\"btn btn-default btn-xs btn-success\" type=\"submit\" onClick={this.exportPlaylist}><span className=\"glyphicon glyphicon-save\"></span> Export</button></td>\n      </tr>\n    );\n  }\n}\n\nexport default PlaylistRow\n","import React from \"react\"\n\nclass Paginator extends React.Component {\n  nextClick = (e) => {\n    e.preventDefault()\n\n    if (this.props.nextURL != null) {\n      this.props.loadPlaylists(this.props.nextURL)\n    }\n  }\n\n  prevClick = (e) => {\n    e.preventDefault()\n\n    if (this.props.prevURL != null) {\n      this.props.loadPlaylists(this.props.prevURL)\n    }\n  }\n\n  render() {\n    if (this.props.nextURL != null || this.props.prevURL != null) {\n      return (\n        <nav className=\"paginator text-right\">\n          <ul className=\"pagination pagination-sm\">\n            <li className={this.props.prevURL == null ? 'disabled' : ''}>\n              { /* eslint-disable-next-line  */ }\n              <a href=\"#\" aria-label=\"Previous\" onClick={this.prevClick}>\n                <span aria-hidden=\"true\">&laquo;</span>\n              </a>\n            </li>\n            <li className={this.props.nextURL == null ? 'disabled' : ''}>\n              { /* eslint-disable-next-line  */ }\n              <a href=\"#\" aria-label=\"Next\" onClick={this.nextClick}>\n                <span aria-hidden=\"true\">&raquo;</span>\n              </a>\n            </li>\n          </ul>\n        </nav>\n      )\n    } else {\n      return <div>&nbsp;</div>\n    }\n  }\n}\n\nexport default Paginator\n","import $ from \"jquery\" // TODO: Remove jQuery dependency\nimport { saveAs } from \"file-saver\"\nimport JSZip from \"jszip\"\n\nimport PlaylistExporter from \"./PlaylistExporter\"\nimport { apiCall } from \"helpers\"\n\n// Handles exporting all playlist data as a zip file\nlet PlaylistsExporter = {\n  export: function(access_token, playlistCount, likedSongsLimit, likedSongsCount) {\n    var playlistFileNames = [];\n\n    apiCall(\"https://api.spotify.com/v1/me\", access_token).then(function(response) {\n      var limit = 20;\n      var userId = response.id;\n      var requests = [];\n\n      // Add playlists\n      for (var offset = 0; offset < playlistCount; offset = offset + limit) {\n        var url = \"https://api.spotify.com/v1/users/\" + userId + \"/playlists\";\n        requests.push(\n          apiCall(`${url}?offset=${offset}&limit=${limit}`, access_token)\n        )\n      }\n\n      $.when.apply($, requests).then(function() {\n        var playlists = [];\n        var playlistExports = [];\n\n        // Handle either single or multiple responses\n        if (typeof arguments[0].href == 'undefined') {\n          $(arguments).each(function(i, response) {\n            if (typeof response[0].items === 'undefined') {\n              // Single playlist\n              playlists.push(response[0]);\n            } else {\n              // Page of playlists\n              $.merge(playlists, response[0].items);\n            }\n          })\n        } else {\n          playlists = arguments[0].items\n        }\n\n        // Add library of saved tracks\n        playlists.unshift({\n          \"id\": \"liked\",\n          \"name\": \"Liked\",\n          \"tracks\": {\n            \"href\": \"https://api.spotify.com/v1/me/tracks\",\n            \"limit\": likedSongsLimit,\n            \"total\": likedSongsCount\n          },\n        });\n\n        $(playlists).each(function(i, playlist) {\n          playlistFileNames.push(PlaylistExporter.fileName(playlist));\n          playlistExports.push(PlaylistExporter.csvData(access_token, playlist));\n        });\n\n        return $.when.apply($, playlistExports);\n      }).then(function() {\n        var zip = new JSZip();\n\n        $(arguments).each(function(i, response) {\n          zip.file(playlistFileNames[i], response)\n        });\n\n        zip.generateAsync({ type: \"blob\" }).then(function(content) {\n          saveAs(content, \"spotify_playlists.zip\");\n        })\n      });\n    });\n  }\n}\n\nexport default PlaylistsExporter\n","import React from \"react\"\nimport $ from \"jquery\" // TODO: Remove jQuery dependency\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nimport PlaylistRow from \"./PlaylistRow\"\nimport Paginator from \"./Paginator\"\nimport PlaylistsExporter from \"./PlaylistsExporter\"\nimport { apiCall } from \"helpers\"\n\nclass PlaylistTable extends React.Component {\n  state = {\n    playlists: [],\n    playlistCount: 0,\n    likedSongsLimit: 0,\n    likedSongsCount: 0,\n    nextURL: null,\n    prevURL: null\n  }\n\n  loadPlaylists = (url) => {\n    var userId = '';\n    var firstPage = typeof url === 'undefined' || url.indexOf('offset=0') > -1;\n\n    apiCall(\"https://api.spotify.com/v1/me\", this.props.access_token).then((response) => {\n      userId = response.id;\n\n      // Show liked tracks playlist if viewing first page\n      if (firstPage) {\n        return $.when.apply($, [\n          apiCall(\n            \"https://api.spotify.com/v1/users/\" + userId + \"/tracks\",\n            this.props.access_token\n          ),\n          apiCall(\n            \"https://api.spotify.com/v1/users/\" + userId + \"/playlists\",\n            this.props.access_token\n          )\n        ])\n      } else {\n        return apiCall(url, this.props.access_token);\n      }\n    }).done((...args) => {\n      var response;\n      var playlists = [];\n\n      if (args[1] === 'success') {\n        response = args[0];\n        playlists = args[0].items;\n      } else {\n        response = args[1][0];\n        playlists = args[1][0].items;\n      }\n\n      // Show library of saved tracks if viewing first page\n      if (firstPage) {\n        playlists.unshift({\n          \"id\": \"liked\",\n          \"name\": \"Liked\",\n          \"public\": false,\n          \"collaborative\": false,\n          \"owner\": {\n            \"id\": userId,\n            \"display_name\": userId,\n            \"uri\": \"spotify:user:\" + userId\n          },\n          \"tracks\": {\n            \"href\": \"https://api.spotify.com/v1/me/tracks\",\n            \"limit\": args[0][0].limit,\n            \"total\": args[0][0].total\n          },\n          \"uri\": \"spotify:user:\" + userId + \":saved\"\n        });\n\n        // FIXME: Handle unmounting\n        this.setState({\n          likedSongsLimit: args[0][0].limit,\n          likedSongsCount: args[0][0].total\n        })\n      }\n\n      // FIXME: Handle unmounting\n      this.setState({\n        playlists: playlists,\n        playlistCount: response.total,\n        nextURL: response.next,\n        prevURL: response.previous\n      });\n\n      $('#playlists').fadeIn();\n      $('#subtitle').text((response.offset + 1) + '-' + (response.offset + response.items.length) + ' of ' + response.total + ' playlists for ' + userId)\n\n    })\n  }\n\n  exportPlaylists = () => {\n    PlaylistsExporter.export(this.props.access_token, this.state.playlistCount, this.state.likedSongsLimit, this.state.likedSongsCount);\n  }\n\n  componentDidMount() {\n    this.loadPlaylists(this.props.url);\n  }\n\n  render() {\n    if (this.state.playlists.length > 0) {\n      return (\n        <div id=\"playlists\">\n          <Paginator nextURL={this.state.nextURL} prevURL={this.state.prevURL} loadPlaylists={this.loadPlaylists}/>\n          <table className=\"table table-hover\">\n            <thead>\n              <tr>\n                <th style={{width: \"30px\"}}></th>\n                <th>Name</th>\n                <th style={{width: \"150px\"}}>Owner</th>\n                <th style={{width: \"100px\"}}>Tracks</th>\n                <th style={{width: \"120px\"}}>Public?</th>\n                <th style={{width: \"120px\"}}>Collaborative?</th>\n                <th style={{width: \"100px\"}} className=\"text-right\">\n                  <button className=\"btn btn-default btn-xs\" type=\"submit\" onClick={this.exportPlaylists}>\n                    <span className=\"fa fa-file-archive\"></span><FontAwesomeIcon icon={['far', 'file-archive']}/> Export All\n                  </button>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.playlists.map((playlist, i) => {\n                return <PlaylistRow playlist={playlist} key={playlist.id} access_token={this.props.access_token}/>\n              })}\n            </tbody>\n          </table>\n          <Paginator nextURL={this.state.nextURL} prevURL={this.state.prevURL} loadPlaylists={this.loadPlaylists}/>\n        </div>\n      );\n    } else {\n      return <div className=\"spinner\" data-testid=\"playlistTableSpinner\"></div>\n    }\n  }\n}\n\nexport default PlaylistTable\n","import './App.scss'\nimport \"./icons\"\n\nimport React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport Login from 'components/Login'\nimport PlaylistTable from \"components/PlaylistTable\"\nimport { getQueryParam } from \"helpers\"\n\nfunction App() {\n  let view\n  let key = new URLSearchParams(window.location.hash.substring(1))\n\n  if (getQueryParam('rate_limit_message') !== '') {\n    view = <div id=\"rateLimitMessage\" className=\"lead\">\n      <p><FontAwesomeIcon icon={['fas', 'bolt']} style={{ fontSize: \"50px\", marginBottom: \"20px\" }} /></p>\n      <p>Oops, Exportify has encountered a <a target=\"_blank\" rel=\"noreferrer\" href=\"https://developer.spotify.com/web-api/user-guide/#rate-limiting\">rate limiting</a> error while using the Spotify API. This might be because of the number of users currently exporting playlists, or perhaps because you have too many playlists to export all at once. Try <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/watsonbox/exportify/issues/6#issuecomment-110793132\">creating your own</a> Spotify application. If that doesn't work, please add a comment to <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/watsonbox/exportify/issues/6\">this issue</a> where possible resolutions are being discussed.</p>\n      <p style={{ marginTop: \"50px\" }}>It should still be possible to export individual playlists, particularly when using your own Spotify application.</p>\n    </div>\n  } else if (key.has('access_token')) {\n    view = <PlaylistTable access_token={key.get('access_token')} />\n  } else {\n    view = <Login />\n  }\n\n  return (\n    <div className=\"App container\">\n      <header className=\"App-header\">\n        <h1>\n          <FontAwesomeIcon icon={['fab', 'spotify']} color=\"#84BD00\" size=\"sm\" /> <a href={process.env.PUBLIC_URL}>Exportify</a>\n        </h1>\n\n        <p id=\"subtitle\" className=\"lead\">\n          Export your Spotify playlists.\n        </p>\n      </header>\n\n      {view}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport Bugsnag from '@bugsnag/js'\nimport BugsnagPluginReact from '@bugsnag/plugin-react'\nimport ReactDOM from \"react-dom\"\nimport \"./index.scss\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nBugsnag.start({\n  apiKey: 'a65916528275f084a1754a59797a36b3',\n  plugins: [new BugsnagPluginReact()],\n  enabledReleaseStages: [ 'production', 'staging' ],\n  onError: function (event) {\n    event.request.url = \"[REDACTED]\" // Don't send access tokens\n  }\n})\n\nconst ErrorBoundary = Bugsnag.getPlugin('react')!.createErrorBoundary(React)\n\nReactDOM.render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}